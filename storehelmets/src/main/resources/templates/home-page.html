<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout :: head">
</head>
fdsfsdfsdasdas
<body>
	<div th:replace="layout :: header">
	</div>
	<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
	  <div class="carousel-inner" id="carousel-inner">
		
	  </div>
	  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
	    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
	    <span class="sr-only">Previous</span>
	  </a>
	  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
	    <span class="carousel-control-next-icon" aria-hidden="true"></span>
	    <span class="sr-only">Next</span>
	  </a>
	</div>
	
	<div class="section-content">
		<div class="page-service">
			<div class="container ">
				<div class="row">
					<div class="col-md-4">
						<div class="item">
							<div class="icon">
								<i class="fas fa-truck-moving "></i>
							</div>
							<h5 class="mt-3">FREESHIP</h5>
							<p class="text-secondary">>Khi mua hàng online thì phí vận chuyển nhiều lúc là một trở ngại lớn ảnh hưởng đến quyết định 
							có mua hàng hay không của chúng ta.</p>
							
						</div>
					</div>
					<div class="col-md-4">
						<div class="item  ">
							<div class="icon">
								<i class="fas fa-hand-point-right"></i>
							</div>
							<h5 class="mt-3"> Hoàn tiền 100%</h5>
							<p class="text-secondary">> Khi mua hàng online thì phí vận chuyển nhiều lúc là một trở ngại lớn ảnh hưởng đến quyết định 
							có mua hàng hay không của chúng ta.</p>
							
						</div>
					</div>
					<div class="col-md-4">
						<div class="item ">
							<div class="icon">
								<i class="fab fa-facebook-messenger"></i>
							</div>
							<h5 class="mt-3">Hỗ trợ 24/7</h5>
							<p class="text-secondary">Khi mua hàng online thì phí vận chuyển nhiều lúc là một trở ngại lớn ảnh hưởng đến quyết định 
							có mua hàng hay không của chúng ta.</p>
							
						</div>
					</div>
					
				</div>
			
			</div>
		</div>
		<div class="adv-product" style="padding-top: 240px;">
			<div class="container ">
				<div class="row">
					<div class="col-md-8">
						<div class="image">
							<img alt="" src="https://i.imgur.com/iMifAog.jpg">
						</div>
					</div>
					<div class="col-md-4">
						<div class="image">
							<img  alt="" src="http://bandophuot.com/wp-content/uploads/2018/01/Banner-slide1.jpg">
						</div>
					</div>
				</div>
			</div>
		</div>
		 <div class="page-bestproduct">
			<div class="container">
				<div class="title text-center">
					<p class="h4 btn btn-warning text-white " style=" font-weight: 500;font-size: 22px;" id="best-selling">Bán chạy</p>
					<p class="h4 btn " style=" font-weight: 500;font-size: 22px;" id="hot-product">Nổi bật</p>
					<p class="h4 btn " style=" font-weight: 500;font-size: 22px;" id="best-price">Giá tốt</p>
				</div>
				<div class="product" id="show-product">
					<div class="slide-holder">
						<div class="slide-pager">
							<div class="slide-control-prev">«</div>
							<div class="slide-control-next btn-">»</div>
						</div>
						<div class="slide-container">
							<div class="slide-stage" id="">
		
							</div>
						</div>
					</div>
				</div>
			</div>
		</div> 
	</div>
	<div class="page-advertisement">
	    <div class="container text-center">
			<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
			  <div class="carousel-inner">
			    <div class="carousel-item active">
			      <div class="image">
					<img alt="#" src="https://scontent.fdad3-3.fna.fbcdn.net/v/t1.0-9/75625421_540219793203236_6951139560503902208_n.jpg?_nc_cat=111&_nc_ohc=EN082XJ6vZIAQnr0gpy5pHWPHQXc0xRpF9F5vq4A1lSrbpNbJLI870eYw&_nc_ht=scontent.fdad3-3.fna&oh=943bcd48586f0e31e4c8f6ddf8456f8d&oe=5E802991">
					</div>
					<p class="h6 text-dark pt-4">Cố gắng ngày mai sẽ khôn hơn ngày hôm nay</p>
			    </div>
			    <div class="carousel-item">
			      <div class="image">
					<img alt="#" src="https://scontent.fdad3-3.fna.fbcdn.net/v/t1.0-9/75625421_540219793203236_6951139560503902208_n.jpg?_nc_cat=111&_nc_ohc=EN082XJ6vZIAQnr0gpy5pHWPHQXc0xRpF9F5vq4A1lSrbpNbJLI870eYw&_nc_ht=scontent.fdad3-3.fna&oh=943bcd48586f0e31e4c8f6ddf8456f8d&oe=5E802991">
					</div>
					<p class="h6 text-dark pt-4">Cố gắng ngày mai sẽ khôn hơn ngày hôm nay</p>
			    </div>
			    <div class="carousel-item">
			     <div class="image">
					<img alt="#" src="https://scontent.fdad3-3.fna.fbcdn.net/v/t1.0-9/75625421_540219793203236_6951139560503902208_n.jpg?_nc_cat=111&_nc_ohc=EN082XJ6vZIAQnr0gpy5pHWPHQXc0xRpF9F5vq4A1lSrbpNbJLI870eYw&_nc_ht=scontent.fdad3-3.fna&oh=943bcd48586f0e31e4c8f6ddf8456f8d&oe=5E802991">
					</div>
					<p class="h6 text-dark pt-4">Cố gắng ngày mai sẽ khôn hơn ngày hôm nay</p>
			    </div>
			  </div>
			  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
			    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
			    <span class="sr-only">Previous</span>
			  </a>
			  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
			    <span class="carousel-control-next-icon" aria-hidden="true"></span>
			    <span class="sr-only">Next</span>
			  </a>
			</div>		
		</div>
	</div>
	<div class="page-productbycategory">
		<div class="container">
			<div class="row no-gutters" id="productByCategory">
				
			
			</div>
		</div>
	
	</div>
	<div class="page-news">
		<div class="container text-center">
			<h4 class="text-white">TIN TỨC</h4>
			<div class="row pt-3" id="loadNewsIndex">
				
			</div>
		</div>
	</div>
	<div class="page-onors">
		<div class="container">
			<div class="row">
				<div class="col-md-2">
					<div class="item">
						<img src="http://mauweb.monamedia.net/nonson/wp-content/uploads/2019/05/logo-01-2.png">
					</div>
				</div>
				<div class="col-md-2">
					<div class="item">
						<img src="http://mauweb.monamedia.net/nonson/wp-content/uploads/2019/05/logo-03-2.png">
					</div>
				</div>
				<div class="col-md-2">
					<div class="item">
						<img src="http://mauweb.monamedia.net/nonson/wp-content/uploads/2019/05/logo-02-2.png">
					</div>
				</div>
				<div class="col-md-2">
					<div class="item">
						<img src="http://mauweb.monamedia.net/nonson/wp-content/uploads/2019/05/logo-04-2.png">
					</div>
				</div>
				<div class="col-md-2">
					<div class="item">
						<img src="http://mauweb.monamedia.net/nonson/wp-content/uploads/2019/05/logo-05-2.png">
					</div>
				</div>
				<div class="col-md-2">
					<div class="item">
						<img src="http://mauweb.monamedia.net/nonson/wp-content/uploads/2019/05/logo-03-2.png">
					</div>
				</div>
			 </div>
		</div>
	</div>
	<div class="page-connect bg-warning">
		<div class="container">
			<div class="row">
				<div class="col-md-6">
					<input type="email" placeholder="Email" class="col-md-8 form-control float-left" style="border-radius: 0;"> 
					<button class="btn bg-dark text-white" style="border-radius: 0;">Đăng ký</button>
				</div>
				<div class="col-md-6">
					<div class="item float-right">
					
					</div>
				</div>
			</div>
		</div>
	
	</div>
	
	<div th:replace="layout :: footer">	</div>
	<div th:replace="layout :: footer-bottom">	</div>
</body>
<script type="text/javascript" th:replace="layout :: js_layout"></script>
<script type="text/javascript">
$( document ).ready(function() {
	loadCarouselItem();
	function loadCarouselItem(){
		$.ajax({
		      url:"/api/v1/users/advertisments",
		      contentType: "application/json",
		      dataType: 'json',
		      success: function(result){
		    	 jQuery.each( result, function( i, val ) {
		    		 if(i == 1){
		    			$("#carousel-inner").append(`
		    		    	<div class="carousel-item active">
		    		    	  <img class="d-block w-100 img-fluid" src="`+val.image+`" >
		    		    	</div>		 
		    		    `);
		    		 }
		    		 if(i != 1){
			    		$("#carousel-inner").append(`
			    		   <div class="carousel-item ">
			    		     <img class="d-block w-100 img-fluid" src="`+val.image+`" >
			    		    </div>		 
			    		 `);
			    	 }
		    	 });	
		      }
		 })
	} 
	loadSlider("/api/v1/users/products/popular");
	function loadSlider( resources){
		$.ajax({
			  url: resources,
		      contentType: "application/json",
		      dataType: 'json',
		      success: function(result){
		    	 for(var i = 0; i<5; i++){
		    		 $(".slide-stage").append(`
		    		    <div class="slide-image ">
			    		    <div class="img">
			    		      	<a href="/chi-tiet-san-pham?id=`+result[i].idProduct+`"><img class="img-fluid ml-4" src="`+result[i].productsDetails.productImages[0].imageName+`"/></a>
			    		    </div>
			    		    <h5 class="text-secondary pt-2">`+result[i].nameProduct+`</h5>
			    		    <h6 class="text-warning pt-2">`+formatNumber(result[i].productsDetails.amount,'-',',')+` đ</h6>
			    		 </div>	
		     		`);	  
		    	 }
		      }
		 });
	}
});
loadProductByCategory();
/* load san pham bang chi tiet danh muc co san pham */
function loadProductByCategory(){
	  $.ajax({
		  url: "/api/v1/users/categorys",
	      contentType: "application/json",
	      dataType: 'json',
	      success: function(result){
	    	  $.ajax({
	    		 url: "/api/v1/users/categorys/details/"+result[1].idCategory,
				 success: function(result){
					 for(i=0;i<4;i++){
						 $("#productByCategory").append(
						    `
						      <div class="col-md-3">
							      <div class="item " id="productCategory`+i+`"  onclick="test()" > 
						    		<p class="h4"id="idCategory`+i+`" data-idCategory=`+result[i].id+`> `+result[i].nameDetailsCategory+`</p>
						    	 </div>
						      </div>
						    `		
						  );
					 }
					 
					 for(i=0;i<4;i++){
						 loadProductByCategoryDetails(i);	 
					 }
					 
					
					 function loadProductByCategoryDetails(i){
				 		var idCategoryDetails = $("#idCategory"+i).attr('data-idCategory');
				 		   $.ajax({
				 			  url: "/api/v1/users/products/categorydetails/"+idCategoryDetails,
				 			  contentType: "application/json",
				 			  methodType:"GET",
				 			  dataType: 'json',
				 			  success: function(result){	
								 for(j=0;j<4;j++){
									 $('#productCategory'+i).append(`
										 <div class="productByCaterogy mt-4">
									 		<div class="image">
									 			<img class="img-fluid" src=`+result[j].productsDetails.productImages[1].imageName+`>
									 		</div>
									 		<div class="content">
									 			<p class="h6">`+result[j].nameProduct+`</p>
									 			<p class="text-warning">`+formatNumber(result[j].productsDetails.amount,'-',',')+` đ</p>
									 		</div>
									     </div>		 
											 
									 `)
								 }
				 			    	 
				 			  }
				 		}); 
					 }
				 }
			});
	      }
	 });
	  
	  loadNews();
	  function loadNews(){
		  $.ajax({
 			  url: "/api/v1/users/news",
 			  contentType: "application/json",
 			  methodType:"GET",
 			  dataType: 'json',
 			  success: function(result){	
				for(i=0;i<3;i++){
					$("#loadNewsIndex").append(`
						<div class="col-md-4">
							<div class="item text-white">
								<a href="#"><img src=`+result[i].newsDetails.images[0].image+` class="img-fluid "></a>
								<h6 class="float-left pt-2">`+result[i].title+`</h6>
								<p class="float-left text-secondary" style="clear: left; font-size:14px">`+result[i].newsDetails.dateCreated+`</p>
								<p class="float-left text-white" style="clear: left; font-size:15px">`+result[i].newsDetails.content+`</p>
							</div>
						</div>
						
					`);
				}
 			    	 
 			  }
 		}); 
	  }
}


</script>
 <script type="text/javascript">
 
 $(function(){
	
	
	// ========= Điều chỉnh các thông số cho slideshow =========
	
		// Số lượng hình muốn hiển thị
		// Lượng hình tồn tại trong slide cần nhiều hơn con số này để slide có thể thực hiện chức năng xoay vòng
		var display_image_number = 6;
		
		// Lựa chọn cách thức xoay vòng (circle) của slide bằng cách thay đổi circle_method bằng các con số tương ứng
		// Method = 1: Sau khi chạm đến giới hạn slide, slide stage sẽ trượt thẳng về vị trí cuối cùng hoặc đầu tiên
		// Method = 2: Sau khi chạm đến giới hạn slide, slide sẽ được quay vòng qua từng hình
		var circle_method = 2;
		
		// Tốc độ dịch chuyển của hình ảnh (đơn vị: milisecond)
		var anispeed = 400;
		
		// Lựa chọn có sử dụng chế độ tự động cuốn hình slide
		// 1 = Kích hoạt, 0 = Không kích hoạt
		var auto_scroll = 1;
		
		// Nếu giá trị auto_scroll = 1 thì có thể điều chỉnh giá trị sau để thay đổi thời gian cuộn
		var timeinterval = 1200;
		
	
	// ========= Xác định các thông số cơ bản của slideshow =========

	// Xác định số lượng hình của slide, chiều rộng của mỗi hình để tìm ra độ rộng của stage
	var image_count = $('.slide-image').length;
	var image_width = $('.slide-image').width();
		// Độ rộng của hình ảnh có thể chỉnh sửa bằng css
		// Độ rộng này quan trọng vì nó sẽ ảnh hưởng đến độ rộng của toàn bộ slide, cần được tính toán cẩn thận
	var stage_width = image_width * image_count;
	// Xác định chiều rộng của khung hiển thị slide
	var display_width = display_image_number * image_width;
	
	// Chỉnh độ dài slide stage tương ứng với số lượng hình cần hiển thị thông qua display_width
	$('.slide-holder').css("width", display_width + "px");
	
	// Chỉnh lại độ dài của khối bao quanh các slide-image (slide-stage) cho vừa bằng tổng số khối slide-image
	$('.slide-stage').css("width", stage_width + "px");
	

	// ========= Xử lý khi click nút next và prev =========
	
	function left_slide_circle(){
		$('.slide-image:last-child').addClass('swapthis'); // Xác định hình đang ở vị trí cuối cùng
		$('.swapthis').insertBefore('.slide-image:first'); // Chuyển hình cuối lên trước hình đầu tiên
		$('.slide-stage').css("left",-image_width + "px"); // Dịch chuyển tức thời vị trí của stage sang một khoảng bằng 1 slide-image
		$('.slide-stage').stop().animate({left:0},anispeed); // Thực hiện animation
		$('.swapthis').removeClass('swapthis'); // Reset class cho slide-image vừa chuyển
	}
	function right_slide_circle(){
		$('.slide-image:first').addClass('swapthis'); // Xác định hình đang ở vị trí cuối cùng
		$('.swapthis').insertAfter('.slide-image:last-child'); // Chuyển hình cuối lên trước hình đầu tiên
		$('.slide-stage').css("left",-(stage_width - image_width - display_width) + "px"); // Dịch chuyển tức thời vị trí của stage sang một khoảng bằng 1 slide-image
		$('.slide-stage').stop().animate({left:display_width - stage_width},anispeed); // Thực hiện animation
		$('.swapthis').removeClass('swapthis'); // Reset class cho slide-image vừa chuyển
	}
	function left_slide_scroll(){
		// Xác định xem slide có còn hình phía bên trái hay không dựa trên Left của stage
		var stage_left = $('.slide-stage').position().left;
		
		// Nếu có
		if(stage_left < 0 && !$('.slide-stage').is(':animated')){ //Kích hoạt chỉ khi stage ko chuyển động nữa
			$('.slide-stage').stop().animate({left:"+=" + image_width},anispeed);
		}
		else // Nếu đã chuyển về hình ảnh đầu tiên thì lựa chọn cách thức quay vòng
		{	
			switch(circle_method){ //Lựa chọn
				case 1:
					$('.slide-stage').stop().animate({left:display_width - stage_width},anispeed);
					break;
				case 2:
					left_slide_circle();
					break;
			}
			
		}
	}
	function right_slide_scroll(){
		// Xác định xem slide có còn hình phía bên phải hay không dựa trên độ dài của stage và container
		var stage_left = Math.abs($('.slide-stage').position().left);
		var right_remain = stage_width - (display_width + stage_left);
		
		// Nếu có
		if(right_remain > 0 && !$('.slide-stage').is(':animated')){ //Kích hoạt chỉ khi stage ko chuyển động nữa
			$('.slide-stage').stop().animate({left:"-=" + image_width},anispeed);
		}
		else // Nếu đã chuyển về hình ảnh đầu tiên thì lựa chọn cách thức quay vòng
			{
				switch(circle_method){ //Lựa chọn
					case 1:
						$('.slide-stage').stop().animate({left:0},anispeed);
						break;
					case 2:
						right_slide_circle();
						break;
				}
			}
		}
	
		$('.slide-control-prev').click(function(){left_slide_scroll();});
		$('.slide-control-next').click(function(){right_slide_scroll();});
	
	// ========= Xử lý auto scroll ==================
	
		function start_slide_auto_scroll(){
			play = setInterval(right_slide_scroll,timeinterval);
		}
	
		// Nếu chế độ auto scroll được chọn thì sẽ kích hoạt 
		if(auto_scroll == 1){
			start_slide_auto_scroll(); 
		}
		
		// Đưa chuột vào slide và các nút sẽ tạm dừng quá trình auto scroll
		$(".slide-container,.slide-control-prev,.slide-control-next").hover(function() {
			clearInterval(play);
		}, function(){
			start_slide_auto_scroll();
		});
	
	})
</script> 
</html>